apiVersion: dataplane.openstack.org/v1beta1
kind: OpenStackDataPlaneService
metadata:
  name: custom-image-service
spec:
  label: dataplane-deployment-custom-image-service
  openStackAnsibleEERunnerImage: example.com/repo/runner-image:latest
  playbook: osp.edpm.test_playbook
---
apiVersion: dataplane.openstack.org/v1beta1
kind: OpenStackDataPlane
metadata:
  name: openstack-edpm-ipam
spec:
  deployStrategy:
      deploy: true
  nodeSets:
    - edpm-compute-no-nodes
---
apiVersion: dataplane.openstack.org/v1beta1
kind: OpenStackDataPlaneNodeSet
metadata:
  name: edpm-compute-no-nodes
spec:
  dataPlane: openstack-edpm-ipam
  deployStrategy:
      deploy: true
  services:
    - custom-image-service
  nodeTemplate:
    nodes: {}
    ansible:
      ansibleUser: cloud-admin
      ansiblePort: 22
      ansibleSSHPrivateKeySecret: dataplane-ansible-ssh-private-key-secret
